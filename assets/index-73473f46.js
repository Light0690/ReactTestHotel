import{r as i,j as r}from"./react-b8fbf05d.js";import{c as H}from"./react-dom-b18fb4d6.js";import{L as j,H as U}from"./react-router-dom-441412e9.js";import{c as w,a as b,b as M}from"./@reduxjs-a9bd0a2e.js";import{a as V,i as L}from"./axios-ce212671.js";import{u as q,a as z,P as Y}from"./react-redux-910885b1.js";import"./hoist-non-react-statics-3f8ebaa8.js";import"./react-is-a192e302.js";import{c as $}from"./classnames-bc35a1ef.js";import{B as W,a as J,b as K,R as X}from"./react-icons-87863f66.js";import{d as G,e as Q}from"./react-router-67e23d4b.js";import"./scheduler-765c72db.js";import"./@remix-run-06a34d2a.js";import"./immer-41fd5235.js";import"./redux-76ec1fc4.js";import"./@babel-19a2e885.js";import"./redux-thunk-ef899f4c.js";import"./use-sync-external-store-7b52be53.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&c(n)}).observe(document,{childList:!0,subtree:!0});function a(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(o){if(o.ep)return;o.ep=!0;const s=a(o);fetch(o.href,s)}})();const B=e=>{if(typeof window>"u")return null;const t=localStorage==null?void 0:localStorage.getItem(e);return t!==null?JSON.parse(t):!1},N=(e,t)=>{localStorage.setItem(e,t)},Z=e=>{const t=e.getFullYear(),a=e.getMonth()<10?"0"+e.getMonth():e.getMonth(),c=e.getDate()<10?"0"+e.getDate():e.getDate();return`${t}-${a}-${c}`},ee=()=>{const e=new Date,t=new Date(e.getFullYear(),e.getMonth()+1,e.getDate());return Z(t)},ht=e=>{if(e==="")return"ошибка параметров";const[t,a,c]=e.split(/-/);return`${c} ${["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"][+a-1]} ${t}`},A=V.create({baseURL:"https://reacttesthotelback-production.up.railway.app/"}),te={getHotels:async({location:e,checkInDate:t,countDays:a,sortByPrice:c,sortByStars:o},{dispatch:s,rejectWithValue:n})=>{var h;try{return(await A.get(`hotels/${e}&${t}&${a}&${c}/${o}`)).data}catch(d){if(L(d)){const l=((h=d.response)==null?void 0:h.data.message)||d.message;return s(ae(l)),n(d)}}}},m=w("hotels/fetchHotels",te.getHotels),se=500,re=5e4,oe={location:"Москва",checkInDate:ee(),countDays:1,sortByStars:[],sortByPrice:[se,re],isLoading:!1,error:"",hotels:[],favorites:[]},P=b({name:"hotels",initialState:oe,reducers:{setSearchForm:(e,t)=>{e.location=t.payload.location,e.checkInDate=t.payload.checkInDate,e.countDays=t.payload.countDays},setSortByStars:(e,t)=>{e.sortByStars=e.sortByStars.find(a=>a===t.payload)?e.sortByStars.filter(a=>a!==t.payload):[...e.sortByStars,t.payload]},setSortByPrice:(e,t)=>{e.sortByPrice=t.payload},setErrorNotification:(e,t)=>{e.error=t.payload}},extraReducers:e=>{e.addCase(m.fulfilled,(t,a)=>{t.hotels=a.payload,t.isLoading=!1}),e.addCase(m.pending,t=>{t.isLoading=!0,t.error=""}),e.addCase(m.rejected,t=>{t.isLoading=!1,t.hotels=[]})}}),dt=e=>e.hotels.location,ut=e=>e.hotels.checkInDate,pt=e=>e.hotels.countDays,_t=e=>e.hotels.sortByStars,mt=e=>e.hotels.sortByPrice,ft=e=>e.hotels.isLoading,gt=e=>e.hotels.error,yt=e=>e.hotels.hotels,St=e=>e.hotels.favorites,{setSearchForm:wt,setSortByStars:xt,setSortByPrice:jt,setErrorNotification:ae}=P.actions,ne=P.reducer,v=e=>async({email:t,password:a},{dispatch:c,rejectWithValue:o})=>{var s;try{return(await A.post(e,{email:t,password:a})).data}catch(n){if(L(n)){const h=((s=n.response)==null?void 0:s.data.message)||n.message;return c(he(h)),o(n)}}},T={doAuthorization:v("auth/login"),doRegistr:v("auth/register")},k=w("auth/fetchAuth",T.doAuthorization),E=w("auth/fetchRegistr",T.doRegistr),ce={isAuth:B("auth"),error:""},I=b({name:"auth",initialState:ce,reducers:{setAuth:(e,t)=>{e.isAuth=t.payload},setErrorNotification:(e,t)=>{e.error=t.payload}},extraReducers:e=>{e.addCase(k.fulfilled,t=>{t.isAuth=!0}),e.addCase(k.pending,t=>{t.error=""}),e.addCase(E.fulfilled,t=>{t.isAuth=!0}),e.addCase(E.pending,t=>{t.error=""})}}),ie=e=>e.auth.isAuth,vt=e=>e.auth.error,{setAuth:le,setErrorNotification:he}=I.actions,de=I.reducer,S=M({reducer:{hotels:ne,auth:de}});S.subscribe(()=>{N("auth",S.getState().auth.isAuth.toString())});const ue=e=>{const t=document.querySelector(":root");["text","theme","bg"].forEach(c=>{t&&t.style.setProperty(`--${c}-color-default`,`var(--${c}-color-${e?"dark":"white"})`)})},pe={isDark:!1},O=i.createContext(pe),_e=({children:e,...t})=>{const a=B("isDark"),[c,o]=i.useState(a?!!a:!1);i.useEffect(()=>{ue(c)},[c]);const s=()=>{o(n=>!n),N("isDark",`${!c}`)};return r.jsx(O.Provider,{value:{isDark:c,changeIsDark:s},...t,children:e})},me="modulepreload",fe=function(e){return"/ReactTestHotelFront/"+e},D={},x=function(t,a,c){if(!a||a.length===0)return t();const o=document.getElementsByTagName("link");return Promise.all(a.map(s=>{if(s=fe(s),s in D)return;D[s]=!0;const n=s.endsWith(".css"),h=n?'[rel="stylesheet"]':"";if(!!c)for(let p=o.length-1;p>=0;p--){const _=o[p];if(_.href===s&&(!n||_.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${h}`))return;const l=document.createElement("link");if(l.rel=n?"stylesheet":me,n||(l.as="script",l.crossOrigin=""),l.href=s,document.head.appendChild(l),n)return new Promise((p,_)=>{l.addEventListener("load",p),l.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t()).catch(s=>{const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=s,window.dispatchEvent(n),!n.defaultPrevented)throw s})},ge=q,ye=z,C="/",Se="/:id",F="/favorite",we="/*",xe=i.lazy(()=>x(()=>import("./index-52720058.js"),["assets/index-52720058.js","assets/react-b8fbf05d.js","assets/classnames-bc35a1ef.js","assets/yup-79311ed6.js","assets/property-expr-38205fa5.js","assets/tiny-case-d0726479.js","assets/toposort-84d4889b.js","assets/formik-ecd829e3.js","assets/deepmerge-15f827de.js","assets/lodash-es-87d1a1d5.js","assets/react-fast-compare-b00643a1.js","assets/tiny-warning-c932d744.js","assets/hoist-non-react-statics-3f8ebaa8.js","assets/minoru-4fba79f4.js","assets/FetchWithError-b3024b40.js","assets/framer-motion-55a73aab.js","assets/FetchWithError-839d6bd7.css","assets/react-icons-87863f66.js","assets/react-slider-62ee8d9e.js","assets/@babel-19a2e885.js","assets/UiButton-d75dad31.js","assets/UiButton-ddbff60f.css","assets/react-router-67e23d4b.js","assets/@remix-run-06a34d2a.js","assets/react-content-loader-e574d110.js","assets/react-dom-b18fb4d6.js","assets/scheduler-765c72db.js","assets/react-router-dom-441412e9.js","assets/@reduxjs-a9bd0a2e.js","assets/immer-41fd5235.js","assets/redux-76ec1fc4.js","assets/redux-thunk-ef899f4c.js","assets/axios-ce212671.js","assets/react-redux-910885b1.js","assets/react-is-a192e302.js","assets/use-sync-external-store-7b52be53.js","assets/index-533280b7.css"])),f=i.lazy(()=>x(()=>import("./index-fc495b1f.js"),["assets/index-fc495b1f.js","assets/react-b8fbf05d.js","assets/classnames-bc35a1ef.js","assets/UiButton-d75dad31.js","assets/framer-motion-55a73aab.js","assets/UiButton-ddbff60f.css","assets/react-router-67e23d4b.js","assets/@remix-run-06a34d2a.js","assets/index-62817e90.css"])),je=[{path:C,element:xe},{path:Se,element:f},{path:F,element:f},{path:we,element:f}],ve=()=>i.useContext(O),ke="_wrapper_1tvmr_1",Ee="_wrapper__heart_1tvmr_7",De="_wrapper__heart_active_1tvmr_13",g={wrapper:ke,wrapper__heart:Ee,wrapper__heart_active:De},Re=({onClick:e,isActive:t})=>r.jsx("button",{className:g.wrapper,children:r.jsx(W,{onClick:e,className:$(g.wrapper__heart,t&&g.wrapper__heart_active)})}),be="_header_1jwsn_1",Le="_header__title_1jwsn_9",$e="_header__buttons_1jwsn_16",Be="_header__link_1jwsn_20",Ne="_header__icon_1jwsn_20",Ae="_header__exit_1jwsn_37",u={header:be,header__title:Le,header__buttons:$e,header__link:Be,header__icon:Ne,header__exit:Ae},Pe=()=>{const e=ve(),t=ge(),a=()=>{t(le(!1))};return r.jsxs("header",{className:u.header,children:[r.jsx("div",{children:r.jsx(j,{className:u.header__title,to:C,children:"Simple Hotel Check"})}),r.jsxs("div",{className:u.header__buttons,children:[r.jsx(j,{to:F,className:u.header__link,children:r.jsx(Re,{isActive:!0,onClick:()=>console.log(1)})}),r.jsx("button",{className:u.header__icon,onClick:e.changeIsDark,children:e.isDark?r.jsx(J,{}):r.jsx(K,{})}),r.jsxs("button",{className:u.header__exit,onClick:a,children:[r.jsx("span",{children:"Выйти"}),r.jsx(X,{style:{color:"#41522E"}})]})]})]})},Te="_wrapper_1o549_1",Ie={wrapper:Te},Oe=({children:e})=>r.jsxs("div",{className:Ie.wrapper,children:[r.jsx(Pe,{}),e]}),Ce="/ReactTestHotelFront/assets/loader-black-0962e58b.svg",R="/ReactTestHotelFront/assets/loader-white-14ecb893.svg",Fe="/ReactTestHotelFront/assets/loader-blue-be271500.svg",He="_wrapper_vnsg6_1",Ue="_loader_vnsg6_9",Me="_shadow_vnsg6_14",y={wrapper:He,loader:Ue,shadow:Me},Ve=({theme:e="white",isShadow:t=!0,classes:a})=>{const[c,o]=i.useState("");return i.useEffect(()=>{switch(e){case"black":o(Ce);break;case"white":o(R);break;case"blue":o(Fe);break;default:o(R);break}},[e]),r.jsx("div",{className:y.wrapper,children:r.jsx("img",{src:c,alt:"loader",className:$(y.loader,t&&y.shadow,a)})})},qe=i.lazy(()=>x(()=>import("./index-1f9c312f.js"),["assets/index-1f9c312f.js","assets/react-b8fbf05d.js","assets/classnames-bc35a1ef.js","assets/yup-79311ed6.js","assets/property-expr-38205fa5.js","assets/tiny-case-d0726479.js","assets/toposort-84d4889b.js","assets/formik-ecd829e3.js","assets/deepmerge-15f827de.js","assets/lodash-es-87d1a1d5.js","assets/react-fast-compare-b00643a1.js","assets/tiny-warning-c932d744.js","assets/hoist-non-react-statics-3f8ebaa8.js","assets/minoru-4fba79f4.js","assets/react-router-dom-441412e9.js","assets/react-router-67e23d4b.js","assets/@remix-run-06a34d2a.js","assets/FetchWithError-b3024b40.js","assets/framer-motion-55a73aab.js","assets/FetchWithError-839d6bd7.css","assets/react-dom-b18fb4d6.js","assets/scheduler-765c72db.js","assets/@reduxjs-a9bd0a2e.js","assets/immer-41fd5235.js","assets/redux-76ec1fc4.js","assets/@babel-19a2e885.js","assets/redux-thunk-ef899f4c.js","assets/axios-ce212671.js","assets/react-redux-910885b1.js","assets/react-is-a192e302.js","assets/use-sync-external-store-7b52be53.js","assets/react-icons-87863f66.js","assets/index-4a4f96b5.css"])),ze=()=>{const e=ye(ie);return r.jsx("div",{className:"App",children:r.jsx(G,{children:je.map((t,a)=>r.jsx(Q,{path:t.path,element:r.jsx(i.Suspense,{fallback:r.jsx(Ve,{theme:"black",isShadow:!1}),children:e?r.jsx(Oe,{children:r.jsx(t.element,{})}):r.jsx(qe,{})})},a))})})};H.createRoot(document.getElementById("root")).render(r.jsx(U,{children:r.jsx(Y,{store:S,children:r.jsx(_e,{children:r.jsx(ze,{})})})}));export{se as M,Re as U,ie as a,ge as b,E as c,ut as d,vt as e,k as f,pt as g,_t as h,xt as i,mt as j,re as k,dt as l,jt as m,ht as n,ft as o,St as p,yt as q,gt as r,wt as s,m as t,ye as u};
