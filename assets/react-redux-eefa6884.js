import{r as u}from"./react-9c5c79a9.js";import"./hoist-non-react-statics-3f8ebaa8.js";import"./react-is-a192e302.js";import{r as k}from"./react-dom-f76e703d.js";import{w as N}from"./use-sync-external-store-772ab098.js";const x=Symbol.for("react-redux-context"),h=typeof globalThis<"u"?globalThis:{};function R(){var e;if(!u.createContext)return{};const n=(e=h[x])!=null?e:h[x]=new Map;let o=n.get(u.createContext);return o||(o=u.createContext(null),n.set(u.createContext,o)),o}const a=R();function D(e){e()}let y=D;const L=e=>y=e,M=()=>y;function U(){const e=M();let n=null,o=null;return{clear(){n=null,o=null},notify(){e(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){let t=[],s=n;for(;s;)t.push(s),s=s.next;return t},subscribe(t){let s=!0,r=o={callback:t,next:null,prev:o};return r.prev?r.prev.next=r:n=r,function(){!s||n===null||(s=!1,r.next?r.next.prev=r.prev:o=r.prev,r.prev?r.prev.next=r.next:n=r.next)}}}}const C={notify(){},get:()=>[]};function B(e,n){let o,t=C;function s(b){return l(),t.subscribe(b)}function r(){t.notify()}function i(){d.onStateChange&&d.onStateChange()}function f(){return!!o}function l(){o||(o=n?n.addNestedSub(i):e.subscribe(i),t=U())}function c(){o&&(o(),o=void 0,t.clear(),t=C)}const d={addNestedSub:s,notifyNestedSubs:r,handleChangeWrapper:i,isSubscribed:f,trySubscribe:l,tryUnsubscribe:c,getListeners:()=>t};return d}const H=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",T=H?u.useLayoutEffect:u.useEffect;function J({store:e,context:n,children:o,serverState:t,stabilityCheck:s="once",noopCheck:r="once"}){const i=u.useMemo(()=>{const c=B(e);return{store:e,subscription:c,getServerState:t?()=>t:void 0,stabilityCheck:s,noopCheck:r}},[e,t,s,r]),f=u.useMemo(()=>e.getState(),[e]);T(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),f!==e.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,f]);const l=n||a;return u.createElement(l.Provider,{value:i},o)}const V=()=>{throw new Error("uSES not initialized!")};function S(e=a){return function(){return u.useContext(e)}}const g=S();function m(e=a){const n=e===a?g:S(e);return function(){const{store:t}=n();return t}}const $=m();function z(e=a){const n=e===a?$:m(e);return function(){return n().dispatch}}const Q=z();let w=V;const P=e=>{w=e},W=(e,n)=>e===n;function I(e=a){const n=e===a?g:S(e);return function(t,s={}){const{equalityFn:r=W,stabilityCheck:i=void 0,noopCheck:f=void 0}=typeof s=="function"?{equalityFn:s}:s,{store:l,subscription:c,getServerState:d,stabilityCheck:b,noopCheck:K}=n();u.useRef(!0);const v=u.useCallback({[t.name](E){return t(E)}}[t.name],[t,b,i]),p=w(c.addNestedSub,l.getState,d||l.getState,v,r);return u.useDebugValue(p),p}}const X=I();P(N.useSyncExternalStoreWithSelector);L(k.unstable_batchedUpdates);export{J as P,X as a,Q as u};
